@use '@angular/material' as mat;

.gem-demis-stepper {
  @include mat.stepper-overrides((
    header-label-text-size: 14px,
    header-label-text-color: var(--color-primary),
    line-color: var(--color-neutral-light),
    header-icon-foreground-color: var(--color-primary),
    header-icon-background-color: var(--color-white),
    header-selected-state-icon-background-color: var(--color-white),
    header-selected-state-icon-foreground-color: var(--color-primary),
    header-error-state-icon-foreground-color: var(--color-primary),
    header-error-state-label-text-color: var(--color-primary),
    header-error-state-label-text-size: 14px,
    header-selected-state-label-text-weight: bold,
  ));

  .step-disabled {
    .mat-step-header {
      pointer-events: none;
      
      * {
        pointer-events: none;
      }

      .mat-step-icon {
        border-color: var(--color-neutral-light) !important;
        background-color: var(--color-white) !important;
        
        // Override Material state colors
        &.mat-step-icon-state-done,
        &.mat-step-icon-state-error {
          background-color: var(--color-white) !important;
        }
      }

      // Target all text/icon content
      .mat-step-label,
      .step-label,
      .step-description {
        color: var(--color-neutral-light) !important;
      }

      // Target step number
      .step-number {
        color: var(--color-neutral-light) !important;
      }

      // Target mat-icon with all possible class combinations
      .mat-step-icon-content {
        mat-icon,
        .mat-icon {
          color: var(--color-neutral-light) !important;
        }
      }

      // Extra specific selectors for icons
      mat-icon.step-valid,
      mat-icon.step-invalid,
      .mat-icon.step-valid,
      .mat-icon.step-invalid {
        color: var(--color-neutral-light) !important;
      }

      // Catch-all for any mat-icon element within disabled step header
      mat-icon[class*="step-"],
      .mat-icon[class*="step-"] {
        color: var(--color-neutral-light) !important;
      }
    }
  }

  .mat-step-header {
    height: fit-content;
  }

  .mat-stepper-vertical-line::before {
    border-left-width: 4px;
    border-radius: 16px;
    margin-left: -1px;
  }

  .mat-step-icon {
    border-width: 1px;
    border-style: dashed;
    border-color: var(--color-primary);
    
    &.mat-step-icon-state-edit {
      background-color: var(--color-white);
      color: var(--color-primary);
      border-style: solid;
    }
    
    &.mat-step-icon-state-done {
      background-color: var(--color-primary);
    }

    &-selected.mat-step-icon-state-number, &.mat-step-icon-state-error {
      border-style: solid;
    }

    .mat-icon {
      font-size: 24px;
      height: 24px;
      width: 24px;
    }
  }

  .step-number {
    font-size: 12px;
    line-height: 16px;
    font-weight: bold;
  }

  .step-label {
    color: var(--color-primary);
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  .step-description {
    color: var(--color-primary);
    font-size: 11px;
    white-space: normal;
  }

  .mat-vertical-content-container {
    height: 0;
  }

  .mat-step-icon.mat-step-icon-state-number.mat-step-icon-selected:has(.mat-icon) {
    background-color: var(--color-primary);

    .mat-icon {
      color: var(--color-white);
    }
  }
}
